!function(){"use strict";function t(t,e){}function e(t,e){this.renderEngine=t,this.tooltip=new s,this.columnWidth=e,this.columnsObject=[]}function i(t){this.model=t}function r(t){return t=t.getBoundingClientRect(),{left:t.left+window.scrollX,top:t.top+window.scrollY}}function n(t){this.renderEngine=t,this.plotCirclesObject={},this.tooltip=new s,this.plotCircleRadius=this.renderEngine.plotCircleRadius;var e,i=this;this.renderEngine.svg.addEventListener("mousemove",function(t){e=new CustomEvent("mousexmovement",{detail:{positionx:t.clientX-l(i.renderEngine.svg).left}}),document.dispatchEvent(e)}),this.renderEngine.svg.addEventListener("mouseout",function(t){e=new CustomEvent("mousexmovement",{detail:{positionx:-1}}),document.dispatchEvent(e)});var i=this;document.addEventListener("mousexmovement",function(t){i.behave(t.detail.positionx)})}function o(t){var e,i,r,n,o;if("string"==typeof t&&(t=JSON.parse(t)),this.data={},this.data.dimensions={width:500,height:600},this.data.ticks={xaxis:5,yaxis:5},this.interpolation=!0,t.interpolation===!1&&(this.interpolation=!1),this.type=t.type||"line",this.data.caption=t.caption||"",this.data.subcaption=t.subcaption||"",this.data.xaxisname=t.xaxisname||"Time",this.data.variables=t.variables||[],this.data.separator=t.separator||"|",this.data.category={},this.data.dateArray=[],t.interpolation===!1&&(this.interpolation=!1),t.dimensions&&(this.data.dimensions.width=t.dimensions.width||this.data.dimensions.width,this.data.dimensions.height=t.dimensions.height||this.data.dimensions.height),t.ticks&&(this.data.ticks.xaxis=t.ticks.xaxis||this.data.ticks.xaxis,this.data.ticks.yaxis=t.ticks.yaxis||this.data.ticks.yaxis),Array.isArray(t.data))for(e=0,i=t.data.length;e<i;++e){n=t.data[e],o=new Date(n.time);for(r in n)if("time"!==r){this.data.category[r]=this.data.category[r]||[];var s=c(o.getYear(),o.getMonth());this.data.category[r].push({year:o.getYear(),month:o.getMonth(),value:Number(n[r]),date:s})}this.data.dateArray.push({year:o.getYear(),month:o.getMonth()})}for(r in this.data.category)this.data.category[r].sort(h);this.data.dateArray.sort(h)}function s(){this.toolEl=document.createElement("div"),document.body.appendChild(this.toolEl),this.toolEl.setAttribute("class","plotTooltip"),this.style="position:absolute;top:-100px;left:-100px;visibility:";var t="hidden";this.toolEl.setAttribute("style",this.style+t)}function a(t,e,i,r,n,o){this.isLabelTop=o,this.engine=t,this.key=n,i=i?i:600,r=r?r:500,this.rootElement=document.getElementById(e),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("height",r),this.svg.setAttribute("width",i),this.svg.setAttribute("class","chart"),this.rootElement.appendChild(this.svg),this.width=i,this.height=r,this.marginX=.1*this.width,this.isLabelTop?this.marginY=.2*this.height:this.marginY=.1*this.height,this.shiftRatioX=.8,this.shiftRatioY=.7,this.plotCircleRadius=5,this.xCoords={},this.__dragListener__()}window.MultiVariantChart=function(t,e){var r=performance.now(),n=new o(t);this.engine=new i(n),this.engine.render(e,n.getType()),console.log("rendered in ",performance.now()-r," seconds")},MultiVariantChart.prototype.sort=function(t){this.engine.rearrange(t)},MultiVariantChart.prototype.reverse=function(t){this.engine.reverse()},window.Sort={average:function(t){var e,i=0;for(e=t.length;--e;)i+=t[e].value;return i/t.length},min:function(t){var e,i=t[0].value;for(e=t.length;--e;)i>t[e].value&&(i=t[e].value);return i},max:function(t){var e,i=t[0].value;for(e=t.length;--e;)i<t[e].value&&(i=t[e].value);return i},shuffle:function(t){return Math.random()-Math.random()}},t.prototype.renderData=function(t,e){},t.prototype.highlight=function(t,e,i,r){},t.prototype.behaveColumnOver=function(t,e){},e.prototype=Object.create(t.prototype),e.prototype.renderData=function(t,e){var i,r,n,o;for(i=0,r=t.length;i<r;++i){n=t[i],o=e[i];var s=this.renderEngine.xRangeEstimator(n)-this.columnWidth/2,a=this.renderEngine.yRangeEstimator(o),h=this.renderEngine.drawRect(s,a,this.columnWidth,a,"data-column");this.columnsObject.push({x1:Math.floor(h.getAttribute("x")),x2:Math.floor(Number(h.getAttribute("x"))+this.columnWidth),y:Math.floor(h.getAttribute("y")),value:o,element:h});var c,u=this;h.addEventListener("mousemove",function(t){c=new CustomEvent("columnover",{detail:{positionx:t.clientX-l(u.renderEngine.svg).left,positiony:t.pageY-l(u.renderEngine.svg).top}}),document.dispatchEvent(c)}),h.addEventListener("mouseout",function(t){c=new CustomEvent("columnover",{detail:{positionx:-1,positiony:-1}}),document.dispatchEvent(c)}),document.addEventListener("columnover",function(t){u.behaveColumnOver(t.detail.positionx,t.detail.positiony)})}},e.prototype.highlight=function(t,e,i,r){var n,o,s,a,h;for(n=this.columnsObject.length;n--;)o=this.columnsObject[n],s=o.x1>=t&&o.x1<=i,a=o.x2>=t&&o.x2<=i,h=o.y<=r,h&&(s||a)?(o.element.setAttribute("class","data-column data-column-hover"),o.hoverProtected=!0):(delete o.hoverProtected,o.element.setAttribute("class","data-column"))},e.prototype.behaveColumnOver=function(t,e){t===-1?this.__loseFocus__():this.__focus__(t,e)},e.prototype.__focus__=function(t,e){var i=l(this.renderEngine.svg).top,r=l(this.renderEngine.svg).left;if(!(t<this.renderEngine.marginX)){var n=this.__findRectAtPoint(t);if(n){n.element.setAttribute("class","data-column data-column-hover");var o=p(n.value),s=e;n.element.getAttribute("y")>s+5&&(s=Number(n.element.getAttribute("y"))-5),this.tooltip.show(s+i+8,t+r,o)}for(var a in this.columnsObject)this.columnsObject[a]===n||this.columnsObject[a].hoverProtected||this.columnsObject[a].element.setAttribute("class","data-column")}},e.prototype.__loseFocus__=function(){this.tooltip.hide();for(var t in this.columnsObject)this.columnsObject[t].hoverProtected||this.columnsObject[t].element.setAttribute("class","data-column")},e.prototype.__findRectAtPoint=function(t){t=Math.floor(t);var e;for(e in this.columnsObject){var i=this.columnsObject[e];if(t>=i.x1&&t<=i.x2)return i}},e.prototype.__tooltipHeightCalulator=function(t,e){var i=this.renderEngine.yRangeEstimator(t),r=(Math.floor.bind(Math),this.renderEngine.height-i);return r-=.05*this.renderEngine.height,r/this.renderEngine.height>.75&&(r-=.25*this.renderEngine.height),r},i.prototype.__getYLimits__=function(t){var e=this.model.getMinY(t),i=this.model.getMaxY(t);if(e===i)return{min:e,max:i};for(var r=i-e,n=i-e,o=v(r);n<1;)o-=1,n*=10;var s=5*Math.pow(10,o-2);if(e=Math.floor(e/s)*s,r/i>.1){var a=Math.pow(10,v(i)-2);s=s>a?s:a}return i=Math.ceil(i/s)*s,{min:e,max:i}},i.prototype.getYRange=function(t){var e,i=[],r=this.__getYLimits__(t).min,n=this.__getYLimits__(t).max;if(r===n)return[2*r,r,0];var o,s,a,h,l,c,u=0;for(c=n;c>99||c<-99;)c/=10,++u;for(l=Math.floor(100*r/Math.pow(10,u))/100;l>99||l<-99;)l/=10,c/=10,++u;for(a=c-l,h=a<=.3?.05:a<=1?.2:a<=3?.5:a<=6?1:a<=12?2:a<=20?4:a<=30?5:a<=40?7:10,o=Math.floor(l/h)*h,s=Math.ceil(c/h)*h,h*=Math.pow(10,u),o*=Math.pow(10,u),s*=Math.pow(10,u),e=o;e<=s;)e=Math.round(100*e)/100,i.push(e),e+=h;return i},i.prototype.getXRange=function(){for(var t=c(this.model.getMinX().year,this.model.getMinX().month),e=c(this.model.getMaxX().year,this.model.getMaxX().month),i=(e-t)/5,r=[];t<=e;)r.push(Math.round(t)),t+=i;return r},i.prototype.getXRangeOfVariable=function(t){var e,i,r,n=this.model.getY(t),o=[];for(e=0,i=n.length;e<i;++e)r=n[e],o[e]=c(r.year,r.month);return o},i.prototype.getYRangeOfVariable=function(t){var e,i,r,n=this.model.getY(t),o=[];for(e=0,i=n.length;e<i;++e)r=n[e],o[e]=r.value;return o},i.prototype.__getValueAtPosition=function(t,e){if(t){var i=this.model.getY(e);u(t);if(!(t<i[0].date||t>i[i.length-1].date))return m(0,i.length-1,t,i,this.model.interpolation)}},i.prototype.getColumnWidth=function(){var t=this.model.getWidth(),e=(this.model.getHeight(),this.model.getMaxPointsOfAllChart()),i=e+1;return Math.floor(t/(e+i))},i.prototype.render=function(t,i){var r;this.rootEl=document.getElementById(t),this.rootEl.innerHTML="",this.rootEl.setAttribute("class","pallete");var o=document.createElement("div");o.setAttribute("class","caption-box");var s=document.createElement("h2");s.setAttribute("class","caption");var h=document.createElement("h4");h.setAttribute("class","sub-caption"),o.appendChild(s),o.appendChild(h),s.innerHTML=this.model.getCaption(),h.innerHTML=this.model.getSubCaption(),this.rootEl.appendChild(o),this.numChartsRow=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.numChartsRow=Math.floor(this.numChartsRow/(this.model.getWidth()+.03*this.numChartsRow));var l=this.model.getAllVariables(),c=0,u=u?u:this.getColumnWidth();this.isChartLabelTop=l.length%this.numChartsRow!==0,this.renderEngineObject={};for(var d in l)r=l[d],this.renderEngineObject[r]=new a(this,t,this.model.getWidth(),this.model.getHeight(),r,this.isChartLabelTop),this.renderEngineObject[r].drawYAxis(this.getYRange(r),r),this.renderEngineObject[r].drawXAxis(this.getXRange()),this.renderEngineObject[r].chartLabel(),"column"===i.toLowerCase()?this.renderEngineObject[r].attachChart(new e(this.renderEngineObject[r],u)):this.renderEngineObject[r].attachChart(new n(this.renderEngineObject[r],u)),this.renderEngineObject[r].renderChart(this.getXRangeOfVariable(r),this.getYRangeOfVariable(r)),++c;this.__prepareArrange__(),this.__showLabels__()},i.prototype.__prepareArrange__=function(){var t,e,i,r,n=this;if(!this.storeSvgArray){this.storeSvgArray=[],this.storeSvgDimensionArray=[];for(t in this.renderEngineObject)this.storeSvgArray.push({svg:this.renderEngineObject[t].svg,key:t,data:this.model.getY(t),object:this.renderEngineObject[t]}),this.storeSvgDimensionArray.push(l(this.renderEngineObject[t].svg))}for(e=0,i=this.storeSvgArray.length;e<i;++e)r="position : absolute; top : "+n.storeSvgDimensionArray[e].top+"px;",r+="left : "+n.storeSvgDimensionArray[e].left+"px;",r+="margin-left : 0px",n.storeSvgArray[e].svg.setAttribute("style",r)},i.prototype.reverse=function(t){var e,i,r,n=this;for(this.storeSvgArray.reverse(),this.__hideLabels__(),e=0,i=n.storeSvgArray.length;e<i;++e)r="position : absolute; top : "+n.storeSvgDimensionArray[e].top+"px;",r+="left : "+n.storeSvgDimensionArray[e].left+"px;",r+="margin-left : 0px",n.storeSvgArray[e].svg.setAttribute("style",r);this.__showLabels__()},i.prototype.rearrange=function(t){var e,i,r,n=this,o=t;for(this.storeSvgArray.sort(function(t,e){return o(t.data)-o(e.data)}),this.__hideLabels__(),e=0,i=n.storeSvgArray.length;e<i;++e)r="position : absolute; top : "+n.storeSvgDimensionArray[e].top+"px;",r+="left : "+n.storeSvgDimensionArray[e].left+"px;",r+="margin-left : 0px",n.storeSvgArray[e].svg.setAttribute("style",r);this.__showLabels__()},i.prototype.__showLabels__=function(){var t,e,i=this;if(this.isChartLabelTop)for(t=0,e=i.storeSvgArray.length;t<this.numChartsRow&&t<e;++t)i.storeSvgArray[t].object.drawXAxisLabels(this.getXRange(),this.isChartLabelTop);else for(e=i.storeSvgArray.length,t=e-this.numChartsRow;t<e;++t)i.storeSvgArray[t].object.drawXAxisLabels(this.getXRange(),this.isChartLabelTop)},i.prototype.__hideLabels__=function(){var t,e,i=this;for(t=0,e=i.storeSvgArray.length;t<e;++t)i.storeSvgArray[t].object.removeXAxisLabels(this.getXRange())};var h=function(t,e){return t=c(t.year,t.month),e=c(e.year,e.month),t-e},l=function(t){var e=t,i=0,n=0;do i+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent;while(t);return 0===i||0===n?r(e):{top:i,left:n}},c=function(t,e){return 12*t+e},u=function(t){return{year:Math.floor(t/12),month:t%12}},d=function(t){var e=u(t).year,i=u(t).month,r=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"];return e%=100,e<10?r[i]+" '0"+e:r[i]+" '"+e},g=function(t){var e,i=v(t),r="";return i>=13?(r="t",e=12):i>=10?(r="b",e=9):i>=7?(r="m",e=6):i>=4?(r="k",e=3):(r="",e=0),t/Math.pow(10,e)+r},p=function(t){var e,i=v(t),r="";i>=13?(r=" trillion",e=12):i>=10?(r=" billion",e=9):i>=7?(r=" million",e=6):i>=4?(r=" thousand",e=3):(r="",e=0);var n=t/Math.pow(10,e);return Math.round(100*n)/100+r},v=function(t){t=t<0?t*-1:t;for(var e=0;t>0;)++e,t=Math.floor(t/10);return e},m=function(t,e,i,r,n){var o;if(e-t===1){if(r[t].date===i&&(o=r[t].value),r[e].date===i&&(o=r[e].value),n){var s=(r[e].value-r[t].value)/(r[e].date-r[t].date),a=r[t].value-r[t].date*s;o=i*s+a}else o=i-r[t].date>r[e].date-i?r[e].value:r[t].value;return{value:o}}var h=Math.floor((t+e)/2);return r[h].date===i?{value:r[h].value}:i>r[h].date?m(h,e,i,r,n):m(t,h,i,r,n)};n.prototype=Object.create(t.prototype),n.prototype.renderData=function(t,e){var i,r,n,o,s,a;for(i=1,r=t.length;i<r;++i)n=t[i],o=t[i-1],s=e[i],a=e[i-1],this.renderEngine.plotLine(o,a,n,s);for(i=0,r=t.length;i<r;++i){n=t[i],s=e[i];var h=this.renderEngine.plotCircle(n,s);this.plotCirclesObject[Math.floor(h.getAttribute("cx"))]={circle:h,y:h.getAttribute("cy")}}},n.prototype.behave=function(t){t===-1||this.__flagMouseDown__?this.__destroyVerticalLine():this.__syncVerticalLine__(t)},n.prototype.highlight=function(t,e,i,r){var n,o;for(n in this.plotCirclesObject)o=this.plotCirclesObject[n],n>=t-this.renderEngine.plotCircleRadius&&n<=i+this.renderEngine.plotCircleRadius&&o.y-this.renderEngine.plotCircleRadius<=r&&o.y+this.renderEngine.plotCircleRadius>=e?(o.hoverProtected=!0,o.circle.setAttribute("class","plot-circle plot-circle-hover")):delete o.hoverProtected},n.prototype.__syncVerticalLine__=function(t){var e=l(this.renderEngine.svg).top,i=l(this.renderEngine.svg).left;if(!(t<this.renderEngine.marginX)){this.verticalLine||(this.verticalLine=document.createElementNS("http://www.w3.org/2000/svg","line"),this.renderEngine.svg.appendChild(this.verticalLine));var r=this.renderEngine.getRatio(t),n=this.renderEngine.engine.__getValueAtPosition(r,this.renderEngine.key);if(n){var o=p(n.value);o+=" \n "+d(r);var s=this.__tooltipHeightCalulator(n.value,this.renderEngine.key);this.tooltip.show(e+s,t+2*this.renderEngine.plotCircleRadius+i,o);var a=this.__findCircleAtPoint(t);a&&a.setAttribute("class","plot-circle plot-circle-hover");for(var h in this.plotCirclesObject)this.plotCirclesObject[h].circle===a||this.plotCirclesObject[h].hoverProtected||this.plotCirclesObject[h].circle.setAttribute("class","plot-circle")}var c=this.renderEngine.height*(1-this.renderEngine.shiftRatioY)-this.renderEngine.marginY;this.verticalLine.setAttribute("x1",t-2),this.verticalLine.setAttribute("y1",c),this.verticalLine.setAttribute("x2",t),this.verticalLine.setAttribute("y2",this.renderEngine.height-this.renderEngine.marginY),this.verticalLine.setAttribute("class","vertical-line")}},n.prototype.__destroyVerticalLine=function(){this.verticalLine&&(this.renderEngine.svg.removeChild(this.verticalLine),this.verticalLine=void 0,this.tooltip.hide());for(var t in this.plotCirclesObject)this.plotCirclesObject[t].hoverProtected||this.plotCirclesObject[t].circle.setAttribute("class","plot-circle")},n.prototype.__findCircleAtPoint=function(t){t=Math.floor(t);var e;for(e=t-this.plotCircleRadius;e<=t+this.plotCircleRadius;++e)if(this.plotCirclesObject[e])return this.plotCirclesObject[e].circle},n.prototype.__tooltipHeightCalulator=function(t,e){var i=this.renderEngine.yRangeEstimator(t),r=(Math.floor.bind(Math),this.renderEngine.height-i);return r-=.05*this.renderEngine.height,r/this.renderEngine.height>.75&&(r-=.25*this.renderEngine.height),r},o.prototype.getMaxPointsOfAllChart=function(){var t=0;for(var e in this.data.category)this.data.category[e].length>t&&(t=this.data.category[e].length);return t},o.prototype.getType=function(){return this.type},o.prototype.getMinX=function(){return this.data.dateArray[0]},o.prototype.getMaxX=function(){return this.data.dateArray[this.data.dateArray.length-1]},o.prototype.getMinY=function(t){var e,i,r=this.data.category[t],n=r[0].value;for(e=0,i=r.length;e<i;++e)n>r[e].value&&(n=r[e].value);return n},o.prototype.getMaxY=function(t){var e,i,r=this.data.category[t],n=r[0].value;for(e=0,i=r.length;e<i;++e)n<r[e].value&&(n=r[e].value);return n},o.prototype.getX=function(){return this.data.dateArray},o.prototype.getY=function(t){return this.data.category[t]},o.prototype.getWidth=function(){return this.data.dimensions.width},o.prototype.getHeight=function(){return this.data.dimensions.height},o.prototype.getAllVariables=function(){return Object.keys(this.data.category)},o.prototype.getCaption=function(){return this.data.caption},o.prototype.getSubCaption=function(){return this.data.subcaption},s.prototype.show=function(t,e,i){this.style="position:absolute;top:"+t+"px;left:"+e+"px;visibility:",this.style+="visible",this.toolEl.innerHTML=i,this.toolEl.setAttribute("style",this.style)},s.prototype.hide=function(){var t=";visibility: hidden";this.toolEl.setAttribute("style",this.style+t)},a.prototype.__dragListener__=function(){function t(){o=l(i.svg).left,s=l(i.svg).top}var e,i=this,r={},n={},o=l(this.svg).left,s=l(this.svg).top,a=0;this.svg.addEventListener("mousedown",function(e){t();var i=new CustomEvent("selectionmousedown",{detail:{x:e.clientX-o,y:e.pageY-s}});document.dispatchEvent(i)}),this.svg.addEventListener("mouseup",function(e){t();var i=new CustomEvent("selectionmouseup",{detail:{x:e.clientX-o,y:e.pageY-s}});document.dispatchEvent(i)}),this.svg.addEventListener("mousemove",function(e){t();var i=new CustomEvent("selectionmousemove",{detail:{x:e.clientX-o,y:e.pageY-s}});document.dispatchEvent(i)}),document.addEventListener("selectionmousedown",function(t){e=l(i.svg).top+i.height-i.marginY,s=i.height-i.marginY-i.height*i.shiftRatioY,i.__sigMouseDown__(),(0===a||2===a)&&t.detail.x>=i.marginX&&t.detail.y>=s&&t.detail.y<=e&&(i.__boxDestroy__(),r.x=t.detail.x,r.y=t.detail.y,a=1),2===a&&(a=0,i.__boxDestroy__())}),document.addEventListener("selectionmouseup",function(t){s=i.height-i.marginY-i.height*i.shiftRatioY,i.__sigMouseUp__(),1===a&&(a=2,i.__boxRemoveFocus__())}),document.addEventListener("selectionmousemove",function(t){s=i.height-i.marginY-i.height*i.shiftRatioY,1===a&&t.detail.x>=i.marginX&&t.detail.y>=s&&t.detail.y<=e&&(n.x=t.detail.x,n.y=t.detail.y,i.__drawBox__(r,n))})},a.prototype.__sigMouseDown__=function(){var t=this;t.attachedChart.__flagMouseDown__=!0},a.prototype.__sigMouseUp__=function(){var t=this;t.attachedChart.__flagMouseDown__=!1},a.prototype.__boxDestroy__=function(){var t=this;t.selectionBox&&(t.svg.removeChild(t.selectionBox),delete t.selectionBox),t.attachedChart.highlight(-1,-1,-1,-1)},a.prototype.__boxRemoveFocus__=function(){var t=this;t.selectionBox&&t.selectionBox.setAttribute("style","opacity: 0")},a.prototype.__drawBox__=function(t,e){var i=this;i.selectionBox||(i.selectionBox=document.createElementNS("http://www.w3.org/2000/svg","rect"),i.svg.appendChild(i.selectionBox));var r=(l(this.svg).left,l(this.svg).top,t.x),n=t.y,o=e.x-t.x,s=e.y-t.y;o<0&&s<0&&(n=e.y,s*=-1,r=e.x,o*=-1),o<0&&s>=0&&(r=e.x,o*=-1),o>=0&&s<0&&(n=e.y,s*=-1),i.selectionBox.setAttribute("x",r),i.selectionBox.setAttribute("y",n),i.selectionBox.setAttribute("width",o),i.selectionBox.setAttribute("height",s),i.selectionBox.setAttribute("style","opacity: 0.2"),i.selectionBox.setAttribute("class","selection-box"),i.attachedChart.highlight(r,n,r+o,n+s)},a.prototype.attachChart=function(t){this.attachedChart=t},a.prototype.renderChart=function(t,e){this.attachedChart.renderData(t,e)},a.prototype.convert=function(t,e){return{x:t+this.marginX,y:this.height-(e+this.marginY)}},a.prototype.__shiftX=function(t){return t*this.shiftRatioX},a.prototype.__shiftY=function(t){return t*this.shiftRatioY},a.prototype.__drawLine__=function(t,e,i,r,n){var o=this.convert(t,e),s=this.convert(i,r),a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",o.x),a.setAttribute("y1",o.y),a.setAttribute("x2",s.x),a.setAttribute("y2",s.y),n&&a.setAttribute("class",n),this.svg.appendChild(a)},a.prototype.drawRect=function(t,e,i,r,n){var o=this.convert(t,e);o.x<this.marginX&&(o.x=this.marginX);var s=document.createElementNS("http://www.w3.org/2000/svg","rect");return s.setAttribute("x",o.x),s.setAttribute("y",o.y),s.setAttribute("width",i),s.setAttribute("height",r),n&&s.setAttribute("class",n),this.svg.appendChild(s),s},a.prototype.__drawCircle=function(t,e,i,r){var n=this.convert(t,e),o=document.createElementNS("http://www.w3.org/2000/svg","circle");return o.setAttribute("cx",n.x),o.setAttribute("cy",n.y),o.setAttribute("r",i),o.setAttribute("class",r),this.svg.appendChild(o),o},a.prototype.__xRangeEstimateGenerator=function(t,e){var i=this;return function(r){return this.__shiftX((r-t)/(e-t)*i.width)}},a.prototype.__yRangeEstimateGenerator=function(t,e){var i=this;return function(r){return this.__shiftY((r-t)/(e-t)*i.height)}},a.prototype.drawXAxisLabels=function(t,e){var i,r,n,o,s,a,h,l;for(this.xAxisLabelsArray||(this.xAxisLabelsArray=[]),i=0,r=t.length;i<r;++i)l=t[i],n=this.xRangeEstimator(l),o=this.xRangeEstimator(l),s=-6,a=0,h=d(l),h=h.split(" "),h=h[0]+"\n"+h[1],e?this.xAxisLabelsArray[i]=this.__placeText(n-1.3*d(l).length,this.height*(this.shiftRatioY+.035),h,"axis-label xaxis-label"):this.xAxisLabelsArray[i]=this.__placeText(n-1.3*d(l).length,-7-.7*this.marginY+.016*this.height,h,"axis-label xaxis-label")},a.prototype.removeXAxisLabels=function(t){if(this.xAxisLabelsArray){var e;for(e=t.length;e--;)this.xAxisLabelsArray[e]&&(this.svg.removeChild(this.xAxisLabelsArray[e]),delete this.xAxisLabelsArray[e])}},a.prototype.drawXAxis=function(t){var e,i,r,n=0,o=this.width,s=0,a=0;this.__drawLine__(n,s,o,a,"axis xaxis");var h=t[0],l=t[t.length-1];for(this.xRangeEstimator=this.__xRangeEstimateGenerator(h,l),e=0,i=t.length;e<i;++e)r=t[e],n=this.xRangeEstimator(r),o=this.xRangeEstimator(r),s=-6,a=0,this.__drawLine__(n,s,o,a,"ticks"),0===e&&(this.xCoords.start={},this.xCoords.start.value=r,this.xCoords.start.position=n+this.marginX),e===i-1&&(this.xCoords.end={},this.xCoords.end.value=r,this.xCoords.end.position=n+this.marginX)},a.prototype.drawYAxis=function(t,e){var i,r,n,o,s=0,a=0,h=0,l=this.height*this.shiftRatioY;this.__drawLine__(s,h,a,l,"axis yaxis");var c=t[0],u=t[t.length-1];for(this.yRangeEstimator=this.__yRangeEstimateGenerator(c,u),i=0,r=t.length;i<r;++i){n=t[i],h=this.yRangeEstimator(n),l=this.yRangeEstimator(n),s=-6,a=0;var d=""+g(t[i]);d=d.trim();var p=s-.025*this.width;p-=d.length/4*10;var v=this.__placeText(p,h-3,d,"axis-label yaxis-label"),m=Number(v.getAttribute("x")),f=Number(v.clientWidth);v.setAttribute("x",m-f/4),this.__drawLine__(s,h,a,l,"ticks",!0),0===i||o||(o=h-this.yRangeEstimator(t[0]))}for(i=0,r=t.length;i<r;++i)n=t[i],h=this.yRangeEstimator(n),l=this.yRangeEstimator(n),s=0,a=this.width,i&&this.drawRect(s,h,this.width,o,"div-lines",!0);e=e[0].toUpperCase()+e.substr(1);0-2*this.marginX/3,(this.height-this.marginY)/2-2*e.length},a.prototype.chartLabel=function(){var t,e,i,r,n,o=this.key;this.isLabelTop?(e=-1*this.marginY/3,i=0,n=this.width*this.shiftRatioX+this.marginX-1,r=.1*this.height):(e=this.height-this.marginY-1,i=0,n=this.width*this.shiftRatioX+this.marginX-1,r=.1*this.height),this.drawRect(i,e,n,r,"chart-label-back"),t=this.__placeText(n/2,e,o.toUpperCase(),"chart-label");var s=Number(t.getAttribute("y")),a=Number(t.getAttribute("x")),h=Number(t.clientHeight),l=Number(t.clientWidth);t.setAttribute("y",s+h),t.setAttribute("x",a-l/2)},a.prototype.getRatio=function(t){var e,i=this.xCoords.end.position-this.xCoords.start.position,r=t-this.xCoords.start.position,n=r/i,o=this.xCoords.end.value-this.xCoords.start.value;return n>=0&&n<=1&&(e=n*o+this.xCoords.start.value),Math.round(e)},a.prototype.__placeText=function(t,e,i,r,n){var o=document.createElementNS("http://www.w3.org/2000/svg","text");if(t=this.convert(t,e).x,e=this.convert(t,e).y,o.setAttribute("x",t),o.setAttribute("y",e),r&&o.setAttribute("class",r),n){var s="rotate(";s+=n,s+=" ",s+=t+","+e,s+=")",o.setAttribute("transform",s)}return o.innerHTML=i,this.svg.appendChild(o),o},a.prototype.plotLine=function(t,e,i,r,n){t=this.xRangeEstimator(t),i=this.xRangeEstimator(i),e=this.yRangeEstimator(e),r=this.yRangeEstimator(r),this.__drawLine__(t,e,i,r,"chart-line")},a.prototype.plotCircle=function(t,e){t=this.xRangeEstimator(t),e=this.yRangeEstimator(e);var i="plot-circle";return this.__drawCircle(t,e,this.plotCircleRadius,i)}}();