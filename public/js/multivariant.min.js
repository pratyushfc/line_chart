!function(){"use strict";function t(t,e,i,r){this.shrink=e,this.min=i.min,this.max=i.max,this.height=t.height,this.width=t.width,this.isVertical=r}function e(t,e){}function i(t,e){this.renderEngine=t,this.tooltip=new a,this.columnWidth=e,this.columnsObject=[]}function r(t){this.model=t}function n(t){return t=t.getBoundingClientRect(),{left:t.left+window.scrollX,top:t.top+window.scrollY}}function o(t){this.renderEngine=t,this.plotCirclesObject={},this.tooltip=new a,this.plotCircleRadius=this.renderEngine.plotCircleRadius;var e,i=this;this.renderEngine.svg.addEventListener("mousemove",function(t){e=new CustomEvent("mousexmovement",{detail:{positionx:t.clientX-g(i.renderEngine.svg).left}}),document.dispatchEvent(e)}),this.renderEngine.svg.addEventListener("mouseout",function(t){e=new CustomEvent("mousexmovement",{detail:{positionx:-1}}),document.dispatchEvent(e)});var i=this;document.addEventListener("mousexmovement",function(t){i.behave(t.detail.positionx)})}function s(t){var e,i,r,n,o;if("string"==typeof t&&(t=JSON.parse(t)),this.data={},this.data.dimensions={width:500,height:600},this.data.ticks={xaxis:5,yaxis:5},this.interpolation=!0,t.interpolation===!1&&(this.interpolation=!1),this.type=t.type||"line",this.data.caption=t.caption||"",this.data.subcaption=t.subcaption||"",this.data.xaxisname=t.xaxisname||"Time",this.data.variables=t.variables||[],this.data.separator=t.separator||"|",this.data.category={},this.data.dateArray=[],t.interpolation===!1&&(this.interpolation=!1),t.dimensions&&(this.data.dimensions.width=t.dimensions.width||this.data.dimensions.width,this.data.dimensions.height=t.dimensions.height||this.data.dimensions.height),t.ticks&&(this.data.ticks.xaxis=t.ticks.xaxis||this.data.ticks.xaxis,this.data.ticks.yaxis=t.ticks.yaxis||this.data.ticks.yaxis),Array.isArray(t.data))for(e=0,i=t.data.length;e<i;++e){n=t.data[e],o=new Date(n.time);for(r in n)if("time"!==r){this.data.category[r]=this.data.category[r]||[];var s=p(o.getYear(),o.getMonth());this.data.category[r].push({year:o.getYear(),month:o.getMonth(),value:Number(n[r]),date:s})}this.data.dateArray.push({year:o.getYear(),month:o.getMonth()})}for(r in this.data.category)this.data.category[r].sort(u);this.data.dateArray.sort(u)}function a(){this.toolEl=document.createElement("div"),document.body.appendChild(this.toolEl),this.toolEl.setAttribute("class","plotTooltip"),this.style="position:absolute;top:-100px;left:-100px;visibility:";var t="hidden";this.toolEl.setAttribute("style",this.style+t)}function h(t,e,i,r,n){this.isLabelTop=n,this.engine=t,this.key=r,this.width=i.width||600,this.height=i.height||500,this.rootElement=document.getElementById(e),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("height",this.height),this.svg.setAttribute("width",this.width),this.svg.setAttribute("class","chart"),this.rootElement.appendChild(this.svg),this.marginX=.13*this.width,this.isLabelTop?this.marginY=.2*this.height:this.marginY=.1*this.height,this.shiftRatioX=.81,this.shiftRatioY=.7,this.plotCircleRadius=5,this.xCoords={},this.__dragListener__()}function l(e,i,r){t.call(this,e,i,r)}function c(e,i,r){t.call(this,e,i,r,!0),this.__getRangeArray__()}window.MultiVariantChart=function(t,e){var i=performance.now(),n=new s(t);this.engine=new r(n),this.engine.render(e,n.getType()),console.log("rendered in ",performance.now()-i," seconds")},MultiVariantChart.prototype.sort=function(t){this.engine.rearrange(t)},MultiVariantChart.prototype.reverse=function(t){this.engine.reverse()},window.Sort={average:function(t){var e,i=0;for(e=t.length;--e;)i+=t[e].value;return i/t.length},min:function(t){var e,i=t[0].value;for(e=t.length;--e;)i>t[e].value&&(i=t[e].value);return i},max:function(t){var e,i=t[0].value;for(e=t.length;--e;)i<t[e].value&&(i=t[e].value);return i},shuffle:function(t){return Math.random()-Math.random()}},t.prototype.estimateRange=function(t){var e=(t-this.min)/(this.max-this.min);return this.isVertical?this.shrink*e*this.height:this.shrink*e*this.width},t.prototype.plotAxis=function(t,e){var i=0,r=this.width*this.shrink,n=0,o=0;this.isVertical&&(i=0,r=0,n=0,o=this.shrink*this.height),e=e||"axis",t.drawLine(i,n,r,o,e)},t.prototype.__getRangeArray__=function(t){if(this.rangeArray)return this.rangeArray;t=t||5;var e=this.min,i=this.max,r=(i-e)/t;for(this.rangeArray=[];e<=i;)this.rangeArray.push(e),e+=r;return this.rangeArray.push(e),this.min=this.rangeArray[0],this.max=this.rangeArray[this.rangeArray.length-1],this.rangeArray},t.prototype.plotTicks=function(t){var e,i,r,n,o,s,a,h=this.__getRangeArray__();for(e=0,i=h.length;e<i;++e)r=h[e],this.isVertical?(n=-6,o=0,s=this.estimateRange(r),a=s):(n=this.estimateRange(r),o=n,s=-6,a=0),t.drawLine(n,s,o,a,"ticks")},t.prototype.placeLabel=function(){},e.prototype.renderData=function(t,e){},e.prototype.highlight=function(t,e,i,r){},e.prototype.behaveColumnOver=function(t,e){},i.prototype=Object.create(e.prototype),i.prototype.renderData=function(t,e){var i,r,n,o;for(i=0,r=t.length;i<r;++i){n=t[i],o=e[i];var s=this.renderEngine.xaxis.estimateRange(n)-this.columnWidth/2,a=this.renderEngine.yaxis.estimateRange(o),h=this.renderEngine.drawRect(s,a,this.columnWidth,a,"data-column");this.columnsObject.push({x1:Math.floor(h.getAttribute("x")),x2:Math.floor(Number(h.getAttribute("x"))+this.columnWidth),y:Math.floor(h.getAttribute("y")),value:o,element:h});var l,c=this;h.addEventListener("mousemove",function(t){l=new CustomEvent("columnover",{detail:{positionx:t.clientX-g(c.renderEngine.svg).left,positiony:t.pageY-g(c.renderEngine.svg).top}}),document.dispatchEvent(l)}),h.addEventListener("mouseout",function(t){l=new CustomEvent("columnover",{detail:{positionx:-1,positiony:-1}}),document.dispatchEvent(l)}),document.addEventListener("columnover",function(t){c.behaveColumnOver(t.detail.positionx,t.detail.positiony)})}},i.prototype.highlight=function(t,e,i,r){var n,o,s,a,h;for(n=this.columnsObject.length;n--;)o=this.columnsObject[n],s=o.x1>=t&&o.x1<=i,a=o.x2>=t&&o.x2<=i,h=o.y<=r,h&&(s||a)?(o.element.setAttribute("class","data-column data-column-hover"),o.hoverProtected=!0):(delete o.hoverProtected,o.element.setAttribute("class","data-column"))},i.prototype.behaveColumnOver=function(t,e){t===-1?this.__loseFocus__():this.__focus__(t,e)},i.prototype.__focus__=function(t,e){var i=g(this.renderEngine.svg).top,r=g(this.renderEngine.svg).left;if(!(t<this.renderEngine.marginX)){var n=this.__findRectAtPoint(t);if(n){n.element.setAttribute("class","data-column data-column-hover");var o=y(n.value),s=e;n.element.getAttribute("y")>s+5&&(s=Number(n.element.getAttribute("y"))-5),this.tooltip.show(s+i+8,t+r,o)}for(var a in this.columnsObject)this.columnsObject[a]===n||this.columnsObject[a].hoverProtected||this.columnsObject[a].element.setAttribute("class","data-column")}},i.prototype.__loseFocus__=function(){this.tooltip.hide();for(var t in this.columnsObject)this.columnsObject[t].hoverProtected||this.columnsObject[t].element.setAttribute("class","data-column")},i.prototype.__findRectAtPoint=function(t){t=Math.floor(t);var e;for(e in this.columnsObject){var i=this.columnsObject[e];if(t>=i.x1&&t<=i.x2)return i}},i.prototype.__tooltipHeightCalulator=function(t,e){var i=this.renderEngine.yRangeEstimator(t),r=(Math.floor.bind(Math),this.renderEngine.height-i);return r-=.05*this.renderEngine.height,r/this.renderEngine.height>.75&&(r-=.25*this.renderEngine.height),r},r.prototype.__getYLimits__=function(t){var e=this.model.getMinY(t),i=this.model.getMaxY(t);if(e===i)return{min:e,max:i};for(var r=i-e,n=i-e,o=f(r);n<1;)o-=1,n*=10;var s=5*Math.pow(10,o-2);if(e=Math.floor(e/s)*s,r/i>.1){var a=Math.pow(10,f(i)-2);s=s>a?s:a}return i=Math.ceil(i/s)*s,{min:e,max:i}},r.prototype.getYRange=function(t){var e,i=[],r=this.__getYLimits__(t).min,n=this.__getYLimits__(t).max;if(r===n)return[2*r,r,0];var o,s,a,h,l,c,u=0;for(c=n;c>99||c<-99;)c/=10,++u;for(l=Math.floor(100*r/Math.pow(10,u))/100;l>99||l<-99;)l/=10,c/=10,++u;for(a=c-l,h=a<=.3?.05:a<=1?.2:a<=3?.5:a<=6?1:a<=12?2:a<=20?4:a<=30?5:a<=40?7:10,o=Math.floor(l/h)*h,s=Math.ceil(c/h)*h,h*=Math.pow(10,u),o*=Math.pow(10,u),s*=Math.pow(10,u),e=o;e<=s;)e=Math.round(100*e)/100,i.push(e),e+=h;return i},r.prototype.getXRange=function(){for(var t=p(this.model.getMinX().year,this.model.getMinX().month),e=p(this.model.getMaxX().year,this.model.getMaxX().month),i=(e-t)/5,r=[];t<=e;)r.push(Math.round(t)),t+=i;return r},r.prototype.getXRangeOfVariable=function(t){var e,i,r,n=this.model.getY(t),o=[];for(e=0,i=n.length;e<i;++e)r=n[e],o[e]=p(r.year,r.month);return o},r.prototype.getYRangeOfVariable=function(t){var e,i,r,n=this.model.getY(t),o=[];for(e=0,i=n.length;e<i;++e)r=n[e],o[e]=r.value;return o},r.prototype.__getValueAtPosition=function(t,e){if(t){var i=this.model.getY(e);d(t);if(!(t<i[0].date||t>i[i.length-1].date))return x(0,i.length-1,t,i,this.model.interpolation)}},r.prototype.getColumnWidth=function(){var t=this.model.getWidth(),e=(this.model.getHeight(),this.model.getMaxPointsOfAllChart()),i=e+1;return Math.floor(t/(e+i))},r.prototype.render=function(t,e){var r,n;this.rootEl=document.getElementById(t),this.rootEl.innerHTML="",this.rootEl.setAttribute("class","pallete");var s=document.createElement("div");s.setAttribute("class","caption-box");var a=document.createElement("h2");a.setAttribute("class","caption");var u=document.createElement("h4");u.setAttribute("class","sub-caption"),s.appendChild(a),s.appendChild(u),a.innerHTML=this.model.getCaption(),u.innerHTML=this.model.getSubCaption(),this.rootEl.appendChild(s),this.numChartsRow=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.numChartsRow=Math.floor(this.numChartsRow/(this.model.getWidth()+.03*this.numChartsRow));var g=this.model.getAllVariables(),d=0,v=v?v:this.getColumnWidth();this.isChartLabelTop=g.length%this.numChartsRow!==0,this.renderEngineObject={};var m={height:this.model.getWidth(),width:this.model.getWidth()},y={min:p(this.model.getMinX().year,this.model.getMinX().month),max:p(this.model.getMaxX().year,this.model.getMaxX().month)},f={};for(var x in g)r=g[x],this.renderEngineObject[r]=new h(this,t,m,r,this.isChartLabelTop),n=this.renderEngineObject[r],f={min:this.model.getMinY(r),max:this.model.getMaxY(r)},n.attachAxisX(new l(m,n.shiftRatioX,y)),n.attachAxisY(new c(m,n.shiftRatioY,f)),n.drawAxisX(),n.drawAxisY(),n.drawAxisYLabel(),n.chartLabel(),"column"===e.toLowerCase()?n.attachChart(new i(n,v)):n.attachChart(new o(n,v)),n.renderChart(this.getXRangeOfVariable(r),this.getYRangeOfVariable(r)),++d;this.__prepareArrange__(),this.__showLabels__()},r.prototype.__prepareArrange__=function(){var t,e,i,r,n=this;if(!this.storeSvgArray){this.storeSvgArray=[],this.storeSvgDimensionArray=[];for(t in this.renderEngineObject)this.storeSvgArray.push({svg:this.renderEngineObject[t].svg,key:t,data:this.model.getY(t),object:this.renderEngineObject[t]}),this.storeSvgDimensionArray.push(g(this.renderEngineObject[t].svg))}for(e=0,i=this.storeSvgArray.length;e<i;++e)r="position : absolute; top : "+n.storeSvgDimensionArray[e].top+"px;",r+="left : "+n.storeSvgDimensionArray[e].left+"px;",r+="margin-left : 0px",n.storeSvgArray[e].svg.setAttribute("style",r)},r.prototype.reverse=function(t){var e,i,r,n=this;for(this.storeSvgArray.reverse(),this.__hideLabels__(),e=0,i=n.storeSvgArray.length;e<i;++e)r="position : absolute; top : "+n.storeSvgDimensionArray[e].top+"px;",r+="left : "+n.storeSvgDimensionArray[e].left+"px;",r+="margin-left : 0px",n.storeSvgArray[e].svg.setAttribute("style",r);this.__showLabels__()},r.prototype.rearrange=function(t){var e,i,r,n=this,o=t;for(this.storeSvgArray.sort(function(t,e){return o(t.data)-o(e.data)}),this.__hideLabels__(),e=0,i=n.storeSvgArray.length;e<i;++e)r="position : absolute; top : "+n.storeSvgDimensionArray[e].top+"px;",r+="left : "+n.storeSvgDimensionArray[e].left+"px;",r+="margin-left : 0px",n.storeSvgArray[e].svg.setAttribute("style",r);this.__showLabels__()},r.prototype.__showLabels__=function(){var t,e,i=this;if(this.isChartLabelTop)for(t=0,e=i.storeSvgArray.length;t<this.numChartsRow&&t<e;++t)i.storeSvgArray[t].object.drawAxisXLabel(this.isChartLabelTop);else for(e=i.storeSvgArray.length,t=e-this.numChartsRow;t<e;++t)i.storeSvgArray[t].object.drawAxisXLabel(this.isChartLabelTop)},r.prototype.__hideLabels__=function(){var t,e,i=this;for(t=0,e=i.storeSvgArray.length;t<e;++t)i.storeSvgArray[t].object.removeAxisXLabel(this.getXRange())};var u=function(t,e){return t=p(t.year,t.month),e=p(e.year,e.month),t-e},g=function(t){var e=t,i=0,r=0;do i+=t.offsetTop||0,r+=t.offsetLeft||0,t=t.offsetParent;while(t);return 0===i||0===r?n(e):{top:i,left:r}},p=function(t,e){return 12*t+e},d=function(t){return{year:Math.floor(t/12),month:t%12}},v=function(t){var e=d(t).year,i=d(t).month,r=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"];return e%=100,e<10?r[i]+" '0"+e:r[i]+" '"+e},m=function(t){var e,i=f(t),r="";return i>=13?(r="t",e=12):i>=10?(r="b",e=9):i>=7?(r="m",e=6):i>=4?(r="k",e=3):(r="",e=0),t/Math.pow(10,e)+r},y=function(t){var e,i=f(t),r="";i>=13?(r=" trillion",e=12):i>=10?(r=" billion",e=9):i>=7?(r=" million",e=6):i>=4?(r=" thousand",e=3):(r="",e=0);var n=t/Math.pow(10,e);return Math.round(100*n)/100+r},f=function(t){t=t<0?t*-1:t;for(var e=0;t>0;)++e,t=Math.floor(t/10);return e},x=function(t,e,i,r,n){var o;if(e-t===1){if(r[t].date===i&&(o=r[t].value),r[e].date===i&&(o=r[e].value),n){var s=(r[e].value-r[t].value)/(r[e].date-r[t].date),a=r[t].value-r[t].date*s;o=i*s+a}else o=i-r[t].date>r[e].date-i?r[e].value:r[t].value;return{value:o}}var h=Math.floor((t+e)/2);return r[h].date===i?{value:r[h].value}:i>r[h].date?x(h,e,i,r,n):x(t,h,i,r,n)};o.prototype=Object.create(e.prototype),o.prototype.renderData=function(t,e){var i,r,n,o,s,a;for(i=1,r=t.length;i<r;++i)n=t[i],o=t[i-1],s=e[i],a=e[i-1],this.renderEngine.plotLine(o,a,n,s);for(i=0,r=t.length;i<r;++i){n=t[i],s=e[i];var h=this.renderEngine.plotCircle(n,s);this.plotCirclesObject[Math.floor(h.getAttribute("cx"))]={circle:h,y:h.getAttribute("cy")}}},o.prototype.behave=function(t){t===-1||this.__flagMouseDown__?this.__destroyVerticalLine():this.__syncVerticalLine__(t)},o.prototype.highlight=function(t,e,i,r){var n,o;for(n in this.plotCirclesObject)o=this.plotCirclesObject[n],n>=t-this.renderEngine.plotCircleRadius&&n<=i+this.renderEngine.plotCircleRadius&&o.y-this.renderEngine.plotCircleRadius<=r&&o.y+this.renderEngine.plotCircleRadius>=e?(o.hoverProtected=!0,o.circle.setAttribute("class","plot-circle plot-circle-hover")):delete o.hoverProtected},o.prototype.__syncVerticalLine__=function(t){var e=g(this.renderEngine.svg).top,i=g(this.renderEngine.svg).left;if(!(t<this.renderEngine.marginX)){this.verticalLine||(this.verticalLine=document.createElementNS("http://www.w3.org/2000/svg","line"),this.renderEngine.svg.appendChild(this.verticalLine));var r=this.renderEngine.getRatio(t),n=this.renderEngine.engine.__getValueAtPosition(r,this.renderEngine.key);if(n){var o=y(n.value);o+=" \n "+v(r);var s=this.__tooltipHeightCalulator(n.value,this.renderEngine.key);this.tooltip.show(e+s,t+2*this.renderEngine.plotCircleRadius+i,o);var a=this.__findCircleAtPoint(t);a&&a.setAttribute("class","plot-circle plot-circle-hover");for(var h in this.plotCirclesObject)this.plotCirclesObject[h].circle===a||this.plotCirclesObject[h].hoverProtected||this.plotCirclesObject[h].circle.setAttribute("class","plot-circle")}var l=this.renderEngine.height*(1-this.renderEngine.shiftRatioY)-this.renderEngine.marginY;this.verticalLine.setAttribute("x1",t-2),this.verticalLine.setAttribute("y1",l),this.verticalLine.setAttribute("x2",t),this.verticalLine.setAttribute("y2",this.renderEngine.height-this.renderEngine.marginY),this.verticalLine.setAttribute("class","vertical-line")}},o.prototype.__destroyVerticalLine=function(){this.verticalLine&&(this.renderEngine.svg.removeChild(this.verticalLine),this.verticalLine=void 0,this.tooltip.hide());for(var t in this.plotCirclesObject)this.plotCirclesObject[t].hoverProtected||this.plotCirclesObject[t].circle.setAttribute("class","plot-circle")},o.prototype.__findCircleAtPoint=function(t){t=Math.floor(t);var e;for(e=t-this.plotCircleRadius;e<=t+this.plotCircleRadius;++e)if(this.plotCirclesObject[e])return this.plotCirclesObject[e].circle},o.prototype.__tooltipHeightCalulator=function(t,e){var i=this.renderEngine.yaxis.estimateRange(t),r=(Math.floor.bind(Math),this.renderEngine.height-i);return r-=.05*this.renderEngine.height,r/this.renderEngine.height>.75&&(r-=.25*this.renderEngine.height),r},s.prototype.getMaxPointsOfAllChart=function(){var t=0;for(var e in this.data.category)this.data.category[e].length>t&&(t=this.data.category[e].length);return t},s.prototype.getType=function(){return this.type},s.prototype.getMinX=function(){return this.data.dateArray[0]},s.prototype.getMaxX=function(){return this.data.dateArray[this.data.dateArray.length-1]},s.prototype.getMinY=function(t){var e,i,r=this.data.category[t],n=r[0].value;for(e=0,i=r.length;e<i;++e)n>r[e].value&&(n=r[e].value);return n},s.prototype.getMaxY=function(t){var e,i,r=this.data.category[t],n=r[0].value;for(e=0,i=r.length;e<i;++e)n<r[e].value&&(n=r[e].value);return n},s.prototype.getX=function(){return this.data.dateArray},s.prototype.getY=function(t){return this.data.category[t]},s.prototype.getWidth=function(){return this.data.dimensions.width},s.prototype.getHeight=function(){return this.data.dimensions.height},s.prototype.getAllVariables=function(){return Object.keys(this.data.category)},s.prototype.getCaption=function(){return this.data.caption},s.prototype.getSubCaption=function(){return this.data.subcaption},a.prototype.show=function(t,e,i){this.style="position:absolute;top:"+t+"px;left:"+e+"px;visibility:",this.style+="visible",this.toolEl.innerHTML=i,this.toolEl.setAttribute("style",this.style)},a.prototype.hide=function(){var t=";visibility: hidden";this.toolEl.setAttribute("style",this.style+t)},h.prototype.attachAxisX=function(t){this.xaxis=t},h.prototype.attachAxisY=function(t){this.yaxis=t},h.prototype.drawAxisX=function(t){this.xaxis.plotAxis(this),this.xaxis.plotTicks(this)},h.prototype.drawAxisY=function(t){this.yaxis.plotAxis(this),this.yaxis.plotTicks(this),this.yaxis.placeDivBoxes(this)},h.prototype.drawAxisXLabel=function(t){this.xaxis.placeLabel(this,t)},h.prototype.drawAxisYLabel=function(){this.yaxis.placeLabel(this)},h.prototype.removeAxisXLabel=function(){this.xaxis.removeLabel(this)},h.prototype.removeElement=function(t){return t?(this.svg.removeChild(t),t):t},h.prototype.__dragListener__=function(){function t(){o=g(i.svg).left,s=g(i.svg).top}var e,i=this,r={},n={},o=g(this.svg).left,s=g(this.svg).top,a=0;this.svg.addEventListener("mousedown",function(e){t();var i=new CustomEvent("selectionmousedown",{detail:{x:e.clientX-o,y:e.pageY-s}});document.dispatchEvent(i)}),this.svg.addEventListener("mouseup",function(e){t();var i=new CustomEvent("selectionmouseup",{detail:{x:e.clientX-o,y:e.pageY-s}});document.dispatchEvent(i)}),this.svg.addEventListener("mousemove",function(e){t();var i=new CustomEvent("selectionmousemove",{detail:{x:e.clientX-o,y:e.pageY-s}});document.dispatchEvent(i)}),document.addEventListener("selectionmousedown",function(t){e=g(i.svg).top+i.height-i.marginY,s=i.height-i.marginY-i.height*i.shiftRatioY,i.__sigMouseDown__(),(0===a||2===a)&&t.detail.x>=i.marginX&&t.detail.y>=s&&t.detail.y<=e&&(i.__boxDestroy__(),r.x=t.detail.x,r.y=t.detail.y,a=1),2===a&&(a=0,i.__boxDestroy__())}),document.addEventListener("selectionmouseup",function(t){s=i.height-i.marginY-i.height*i.shiftRatioY,i.__sigMouseUp__(),1===a&&(a=2,i.__boxRemoveFocus__())}),document.addEventListener("selectionmousemove",function(t){s=i.height-i.marginY-i.height*i.shiftRatioY,1===a&&t.detail.x>=i.marginX&&t.detail.y>=s&&t.detail.y<=e&&(n.x=t.detail.x,n.y=t.detail.y,i.__drawBox__(r,n))})},h.prototype.__sigMouseDown__=function(){var t=this;t.attachedChart.__flagMouseDown__=!0},h.prototype.__sigMouseUp__=function(){var t=this;t.attachedChart.__flagMouseDown__=!1},h.prototype.__boxDestroy__=function(){var t=this;t.selectionBox&&(t.svg.removeChild(t.selectionBox),delete t.selectionBox),t.attachedChart.highlight(-1,-1,-1,-1)},h.prototype.__boxRemoveFocus__=function(){var t=this;t.selectionBox&&t.selectionBox.setAttribute("style","opacity: 0")},h.prototype.__drawBox__=function(t,e){var i=this;i.selectionBox||(i.selectionBox=document.createElementNS("http://www.w3.org/2000/svg","rect"),i.svg.appendChild(i.selectionBox));var r=(g(this.svg).left,g(this.svg).top,t.x),n=t.y,o=e.x-t.x,s=e.y-t.y;o<0&&s<0&&(n=e.y,s*=-1,r=e.x,o*=-1),o<0&&s>=0&&(r=e.x,o*=-1),o>=0&&s<0&&(n=e.y,s*=-1),i.selectionBox.setAttribute("x",r),i.selectionBox.setAttribute("y",n),i.selectionBox.setAttribute("width",o),i.selectionBox.setAttribute("height",s),i.selectionBox.setAttribute("style","opacity: 0.2"),i.selectionBox.setAttribute("class","selection-box"),i.attachedChart.highlight(r,n,r+o,n+s)},h.prototype.attachChart=function(t){this.attachedChart=t},h.prototype.renderChart=function(t,e){this.attachedChart.renderData(t,e)},h.prototype.convert=function(t,e){return{x:t+this.marginX,y:this.height-(e+this.marginY)}},h.prototype.__shiftX=function(t){return t*this.shiftRatioX},h.prototype.__shiftY=function(t){return t*this.shiftRatioY},h.prototype.drawLine=function(t,e,i,r,n){var o=this.convert(t,e),s=this.convert(i,r),a=document.createElementNS("http://www.w3.org/2000/svg","line");return a.setAttribute("x1",o.x),a.setAttribute("y1",o.y),a.setAttribute("x2",s.x),a.setAttribute("y2",s.y),n&&a.setAttribute("class",n),this.svg.appendChild(a),a},h.prototype.drawRect=function(t,e,i,r,n){var o=this.convert(t,e);o.x<this.marginX&&(o.x=this.marginX);var s=document.createElementNS("http://www.w3.org/2000/svg","rect");return s.setAttribute("x",o.x),s.setAttribute("y",o.y),s.setAttribute("width",i),s.setAttribute("height",r),n&&s.setAttribute("class",n),this.svg.appendChild(s),s},h.prototype.__drawCircle=function(t,e,i,r){var n=this.convert(t,e),o=document.createElementNS("http://www.w3.org/2000/svg","circle");return o.setAttribute("cx",n.x),o.setAttribute("cy",n.y),o.setAttribute("r",i),o.setAttribute("class",r),this.svg.appendChild(o),o},h.prototype.drawRect=function(t,e,i,r,n){var o=this.convert(t,e);o.x<this.marginX&&(o.x=this.marginX);var s=document.createElementNS("http://www.w3.org/2000/svg","rect");return s.setAttribute("x",o.x),s.setAttribute("y",o.y),s.setAttribute("width",i),s.setAttribute("height",r),n&&s.setAttribute("class",n),this.svg.appendChild(s),s},h.prototype.removeXAxisLabels=function(t){},h.prototype.chartLabel=function(){var t,e,i,r,n,o=this.key;this.isLabelTop?(e=-1*this.marginY/3,i=0,n=this.width*this.shiftRatioX+this.marginX-1,r=.1*this.height):(e=this.height-this.marginY-1,i=0,n=this.width*this.shiftRatioX+this.marginX-1,r=.1*this.height),this.drawRect(i,e,n,r,"chart-label-back"),t=this.__placeText(n/2,e,o.toUpperCase(),"chart-label");var s=Number(t.getAttribute("y")),a=Number(t.getAttribute("x")),h=Number(t.clientHeight),l=Number(t.clientWidth);t.setAttribute("y",s+h),t.setAttribute("x",a-l/2)},h.prototype.getRatio=function(t){var e,i=this.xaxis.estimateRange(this.xaxis.max)-this.xaxis.estimateRange(this.xaxis.min),r=t-this.xaxis.estimateRange(this.xaxis.min)-this.marginX,n=r/i,o=this.xaxis.max-this.xaxis.min;return n>=0&&n<=1&&(e=n*o+this.xaxis.min),Math.round(e)},h.prototype.__placeText=function(t,e,i,r,n,o){var s,a,h=document.createElementNS("http://www.w3.org/2000/svg","text");if(t=this.convert(t,e).x,e=this.convert(t,e).y,h.setAttribute("x",t),h.setAttribute("y",e),r&&h.setAttribute("class",r),n){var l="rotate(";l+=n,l+=" ",l+=t+","+e,l+=")",h.setAttribute("transform",l)}if(h.innerHTML=i,this.svg.appendChild(h),o){o=o.split(" ");for(s in o)a=o[s],a&&"center-horizontal"===a&&(t-=h.clientWidth/2),a&&"down"===a&&(e+=+h.clientHeight),a&&"center-vertical"===a&&(e+=h.clientHeight/2),a&&"half-center-vertical"===a&&(e+=h.clientHeight/4),a&&"up"===a&&(e-=+h.clientHeight),a&&"left-horizontal"===a&&(t-=h.clientWidth),h.setAttribute("x",t),h.setAttribute("y",e)}return h},h.prototype.plotLine=function(t,e,i,r,n){t=this.xaxis.estimateRange(t),i=this.xaxis.estimateRange(i),e=this.yaxis.estimateRange(e),r=this.yaxis.estimateRange(r),n=n||"chart-line",this.drawLine(t,e,i,r,n)},h.prototype.plotCircle=function(t,e){t=this.xaxis.estimateRange(t),e=this.yaxis.estimateRange(e);var i="plot-circle";return this.__drawCircle(t,e,this.plotCircleRadius,i)},l.prototype=Object.create(t.prototype),l.prototype.constructor=l,l.prototype.placeLabel=function(t,e){var i,r=0,n=0,o=0,s=0,a="",h=this.__getRangeArray__(),l="center-horizontal down";for(this.labelArray||(this.labelArray=[]),e&&(s=t.yaxis.shrink*this.height,l="center-horizontal up"),r=0,n=h.length;r<n;++r)i=Math.round(h[r]),o=this.estimateRange(i),a=v(i),this.labelArray[r]=t.__placeText(o,s,a,"axis-label xaxis-label",null,l)},l.prototype.removeLabel=function(t){var e,i=0,r=0;if(this.labelArray)for(i=0,r=this.labelArray.length;i<r;++i)e=this.labelArray[i],e&&(t.removeElement(e),this.labelArray[i]=void 0)},c.prototype=Object.create(t.prototype),c.prototype.constructor=c,c.prototype.__getRangeArray__=function(){var t,e=[],i=this.__beautifyLimits__(),r=i.min,n=i.max,o=0,s=0,a=0,h=0,l=0,c=0,u=0,c=n;if(this.rangeArray)return this.rangeArray;if(r===n)return this.rangeArray=[2*r,r,0],this.rangeArray;for(;c>99||c<-99;)c/=10,++u;for(l=Math.floor(100*r/Math.pow(10,u))/100;l>99||l<-99;)l/=10,c/=10,++u;for(a=c-l,h=a<=.3?.05:a<=1?.2:a<=3?.5:a<=6?1:a<=12?2:a<=20?4:a<=30?5:a<=40?7:10,o=Math.floor(l/h)*h,s=Math.ceil(c/h)*h,h*=Math.pow(10,u),o*=Math.pow(10,u),s*=Math.pow(10,u),t=o;t<=s;)t=Math.round(100*t)/100,e.push(t),t+=h;return this.rangeArray=e,this.min=this.rangeArray[0],this.max=this.rangeArray[this.rangeArray.length-1],e},c.prototype.__beautifyLimits__=function(){var t=this.min,e=this.max;if(t===e)return{min:t,max:e};for(var i=e-t,r=e-t,n=f(i);r<1;)n-=1,r*=10;var o=5*Math.pow(10,n-2);if(t=Math.floor(t/o)*o,i/e>.1){var s=Math.pow(10,f(e)-2);o=o>s?o:s}return e=Math.ceil(e/o)*o,{min:t,max:e}},c.prototype.placeLabel=function(t){var e,i=0,r=0,n=0,o=0,s="",a=this.__getRangeArray__(),h="left-horizontal center-horizontal half-center-vertical";for(this.labelArray||(this.labelArray=[]),i=0,r=a.length;i<r;++i)e=Math.round(a[i]),o=this.estimateRange(e),s=m(e),this.labelArray[i]=t.__placeText(n,o,s,"axis-label yaxis-label",null,h)},c.prototype.placeDivBoxes=function(t){var e,i=0,r=0,n=t.xaxis.estimateRange(0),o=5,s=t.xaxis.max,a=this.estimateRange(this.rangeArray[1])-this.estimateRange(this.rangeArray[0]),h=this.__getRangeArray__();for(i=1,r=h.length;i<r;++i)e=Math.round(h[i]),o=this.estimateRange(e),t.drawRect(n,o,s,a,"div-lines")}}();